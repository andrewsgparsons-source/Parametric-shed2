<!-- FILE: docs/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Parametric Shed — Views</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles.css">
</head>

<body data-view="3d">
  <canvas id="renderCanvas" tabindex="0" aria-hidden="false"></canvas>
  <div id="statusOverlay">status...</div>

  <div id="topbar">
    <select id="viewSelect" aria-label="Select view">
      <option value="3d" selected>3D Scene View</option>
      <option value="walls">Walls Cutting List</option>
      <option value="base">Base Cutting List</option>
      <option value="roof">Roof Cutting List</option>
    </select>
  </div>

  <div id="ui-layer" aria-hidden="true"></div>

  <div id="controls" aria-label="Controls">
    <aside id="controlPanel" aria-label="Controls panel">
      <details open>
        <summary>Controls <span style="font-weight:700;font-size:12px;color:#666;">(toggle)</span></summary>
        <div class="inner">
          <div class="boHeader">
            <div class="boTitle1">Design your shed</div>
            <div class="boTitle2">Build Options — v1.8</div>
          </div>

          <form aria-label="Build options">
            <details open class="boSection">
              <summary>Size &amp; Shape</summary>
              <div class="boBox">
                <div class="row">
                  <label>
                    Unit Mode
                    <div class="unitModeRow" role="group" aria-label="Unit Mode (Metric / Imperial)">
                      <label class="check"><input id="unitModeMetric" type="radio" name="unitMode" value="metric" checked /> Metric</label>
                      <label class="check"><input id="unitModeImperial" type="radio" name="unitMode" value="imperial" /> Imperial</label>
                    </div>
                  </label>
                  <div></div>
                </div>

                <div class="row">
                  <label>
                    Dimension Mode
                    <select id="dimMode" aria-label="Dimension Mode (Base / Frame / Roof)">
                      <option value="base" selected>base</option>
                      <option value="frame">frame</option>
                      <option value="roof">roof</option>
                    </select>
                  </label>
                  <div></div>
                </div>

                <div class="row">
                  <label>
                    Width (mm)
                    <input id="wInput" type="number" min="1" step="10" value="3000" />
                  </label>
                  <label>
                    Depth (mm)
                    <input id="dInput" type="number" min="1" step="10" value="4000" />
                  </label>
                </div>

                <div class="row">
                  <label>
                    Roof Type
                    <select id="roofStyle" aria-label="Roof Type">
                      <option value="apex" selected>Apex (gabled)</option>
                      <option value="pent">Pent (single pitch)</option>
                      <option value="hipped">Hipped</option>
                    </select>
                  </label>
                  <label>
                    Variant
                    <select id="wallsVariant" aria-label="Variant">
                      <option value="insulated" selected>Insulated</option>
                      <option value="basic">Basic</option>
                    </select>
                  </label>
                </div>
              </div>
            </details>

            <details open class="boSection">
              <summary>Walls &amp; Openings</summary>
              <div class="boBox">
                <div class="boSubhead">Wall Construction</div>
                <div class="row">
                  <label>
                    Stud / Plate Size
                    <select id="wallSection" aria-label="Stud and plate size">
                      <option value="50x75">50×75</option>
                      <option value="50x100" selected>50×100</option>
                    </select>
                  </label>
                  <div></div>
                </div>

                <div class="boSubhead" style="margin-top:10px;">Doors</div>
                <div class="row">
                  <button id="addDoorBtn" type="button">+ Add Door</button>
                  <button id="removeAllDoorsBtn" type="button">Remove All</button>
                </div>
                <div id="doorsList"></div>

                <div class="boSubhead" style="margin-top:10px;">Windows</div>
                <div class="row">
                  <button id="addWindowBtn" type="button">+ Add Window</button>
                  <button id="removeAllWindowsBtn" type="button">Remove All</button>
                </div>
                <div id="windowsList"></div>
              </div>
            </details>

            <details open class="boSection">
              <summary>Roof</summary>
              <div class="boBox">
                <div class="boSubhead">Building Height Options</div>
                <div class="hint" style="margin:0 0 10px 0;">(Shown after roof type selection)</div>

                <div id="roofHeightOptions">
                  <div id="roofHeightsApex" class="roofHeightsBlock" aria-hidden="false">
                    <div class="boRuleTitle">── Apex Roof ──────────────────────────────────────────────</div>
                    <div class="row">
                      <label>
                        Height to Eaves (mm)
                        <input id="roofApexEaveHeight" type="number" min="100" step="10" value="1850" />
                      </label>
                      <label>
                        Height to Crest (mm)
                        <input id="roofApexCrestHeight" type="number" min="100" step="10" value="2200" />
                      </label>
                    </div>
                    <div class="row">
                      <label>
                        Roof Pitch
                        <input id="roofPitchApex" type="text" value="30°" readonly aria-readonly="true" />
                      </label>
                      <div class="hint" style="align-self:end;">(calculated, read-only)</div>
                    </div>
                  </div>

                  <div id="roofHeightsPent" class="roofHeightsBlock" aria-hidden="true">
                    <div class="boRuleTitle">── Pent Roof ──────────────────────────────────────────────</div>
                    <div class="row">
                      <label>
                        Minimum Height (mm)
                        <input id="roofMinHeight" type="number" min="100" step="10" value="2100" />
                      </label>
                      <label>
                        Maximum Height (mm)
                        <input id="roofMaxHeight" type="number" min="100" step="10" value="2300" />
                      </label>
                    </div>
                    <div class="row">
                      <label>
                        Roof Pitch
                        <input id="roofPitchPent" type="text" value="7°" readonly aria-readonly="true" />
                      </label>
                      <div class="hint" style="align-self:end;">(calculated, read-only)</div>
                    </div>
                  </div>

                  <div id="roofHeightsHipped" class="roofHeightsBlock" aria-hidden="true">
                    <div class="boRuleTitle">── Hipped Roof ────────────────────────────────────────────</div>
                    <div class="row">
                      <label>
                        Height to Eaves (mm)
                        <input id="roofHippedEaveHeight" type="number" min="100" step="10" value="2000" />
                      </label>
                      <label>
                        Height to Crest (mm)
                        <input id="roofHippedCrestHeight" type="number" min="100" step="10" value="2400" />
                      </label>
                    </div>
                    <div class="row">
                      <label>
                        Roof Pitch
                        <input id="roofPitchHipped" type="text" value="25°" readonly aria-readonly="true" />
                      </label>
                      <div class="hint" style="align-self:end;">(calculated, read-only)</div>
                    </div>
                    <div class="row">
                      <button id="hippedDesignOptionsBtn" type="button" disabled aria-disabled="true">Hipped Roof Design Options</button>
                      <div class="hint" style="align-self:end;">(disabled / coming soon)</div>
                    </div>
                  </div>
                </div>

                <div class="boRuleTitle">───────────────────────────────────────────────────────────</div>
                <div class="boSubhead" style="margin-top:8px;">Overhangs</div>
                <div class="row">
                  <label>
                    Uniform
                    <input id="roofOverUniform" type="number" min="0" step="1" value="0" />
                  </label>
                  <div></div>
                </div>
                <div class="row">
                  <label>Front<input id="roofOverFront" type="number" min="0" step="1" placeholder="(blank = uniform)" /></label>
                  <label>Back<input id="roofOverBack" type="number" min="0" step="1" placeholder="(blank = uniform)" /></label>
                </div>
                <div class="row">
                  <label>Left<input id="roofOverLeft" type="number" min="0" step="1" placeholder="(blank = uniform)" /></label>
                  <label>Right<input id="roofOverRight" type="number" min="0" step="1" placeholder="(blank = uniform)" /></label>
                </div>
              </div>
            </details>

            <details open class="boSection">
              <summary>Appearance</summary>
              <div class="boBox">
                <div class="hint">(Cladding, finishes, colours — future)</div>
              </div>
            </details>

            <details open class="boSection">
              <summary>Visibility (Advanced)</summary>
              <div class="boBox">
                <div class="checks" role="group" aria-label="Visibility: Whole assemblies">
                  <div class="hint" style="margin:0 0 6px 0;">Whole Assemblies</div>
                  <label class="check"><input id="vBaseAll" type="checkbox" checked /> Base</label>
                  <label class="check"><input id="vWalls" type="checkbox" checked /> Walls</label>
                  <label class="check"><input id="vRoof" type="checkbox" checked /> Roof</label>
                  <label class="check"><input id="vCladding" type="checkbox" /> Cladding</label>
                </div>

                <div class="checks" role="group" aria-label="Visibility: Base components" style="margin-top:10px;">
                  <div class="hint" style="margin:0 0 6px 0;">Base Components</div>
                  <label class="check"><input id="vBase" type="checkbox" checked /> Base Grid</label>
                  <label class="check"><input id="vFrame" type="checkbox" checked /> Timber Frame</label>
                  <label class="check"><input id="vIns" type="checkbox" checked /> Insulation</label>
                  <label class="check"><input id="vDeck" type="checkbox" checked /> Decking</label>
                </div>

                <div class="checks" role="group" aria-label="Visibility: Wall components" style="margin-top:10px;">
                  <div class="hint" style="margin:0 0 6px 0;">Wall Components</div>
                  <label class="check"><input id="vWallFront" type="checkbox" checked /> Front</label>
                  <label class="check"><input id="vWallBack" type="checkbox" checked /> Back</label>
                  <label class="check"><input id="vWallLeft" type="checkbox" checked /> Left</label>
                  <label class="check"><input id="vWallRight" type="checkbox" checked /> Right</label>
                </div>

                <div class="checks" role="group" aria-label="Visibility: Roof components" style="margin-top:10px;">
                  <div class="hint" style="margin:0 0 6px 0;">Roof Components</div>
                  <label class="check"><input id="vRoofStructure" type="checkbox" checked /> Structure (future-safe)</label>
                  <label class="check"><input id="vRoofOsb" type="checkbox" checked /> OSB / Sheathing (future-safe)</label>
                  <label class="check"><input id="vRoofCovering" type="checkbox" /> Roof Covering</label>
                </div>
              </div>
            </details>

            <details open class="boSection">
              <summary>Save / Load Design</summary>
              <div class="boBox">
                <div class="boSubhead">Saved Designs</div>
                <div class="row">
                  <label>
                    <span class="srOnly">Select design</span>
                    <select id="instanceSelect" aria-label="Select design"></select>
                  </label>
                  <div></div>
                </div>

                <div class="row">
                  <button id="saveInstanceBtn" type="button">Save</button>
                  <button id="saveAsInstanceBtn" type="button">Save As</button>
                  <button id="loadInstanceBtn" type="button">Load</button>
                  <button id="deleteInstanceBtn" type="button">Delete</button>
                </div>

                <div class="row">
                  <label>
                    <span class="hint" style="display:block;margin:0 0 4px 0;">New name</span>
                    <input id="instanceNameInput" type="text" placeholder="e.g. Client A" />
                  </label>
                  <div></div>
                </div>

                <p id="instancesHint" class="hint"></p>
              </div>
            </details>
          </form>
        </div>
      </details>
    </aside>
  </div>

  <!-- View: Base Cutting List -->
  <div id="bomPage" class="page" aria-hidden="true">
    <h2 tabindex="-1">Master Cutting &amp; Assembly Schedule</h2>

    <div id="bomToolbar">
      <label for="unitsSelect" style="font-size:12px;color:#555;">Units:</label>
      <select id="unitsSelect">
        <option value="mm">mm</option>
        <option value="both">mm + in</option>
      </select>
      <button id="exportCsvBtn">Export CSV</button>
      <button id="printBtn">Print</button>
    </div>

    <div class="schedule-section">
      <h4>1. Timber Frame</h4>
      <table class="sticky-table">
        <thead><tr><th>Item</th><th>Qty</th><th>Cut Size</th><th>Notes</th></tr></thead>
        <tbody id="timberTableBody"></tbody>
        <tfoot><tr class="totals-row"><td colspan="4" id="timberTotals"></td></tr></tfoot>
      </table>
    </div>

    <div class="schedule-section">
      <h4>3. OSB Decking Cutting List (8x4 Sheets)</h4>
      <p class="subtle">Standard Sheets are full 1220×2440 (oriented per joists). Remainders are staggered as in the 3D layout.</p>

      <table class="sticky-table">
        <thead><tr><th colspan="4">Standard Sheets</th></tr></thead>
        <thead><tr><th>Piece</th><th>Qty</th><th>Size (L × W)</th><th>Notes</th></tr></thead>
        <tbody id="osbStdBody"></tbody>
        <tfoot><tr class="totals-row"><td colspan="4" id="osbStdTotals"></td></tr></tfoot>
      </table>

      <table class="sticky-table">
        <thead><tr><th colspan="4">Rip / Trim Cuts</th></tr></thead>
        <thead><tr><th>Piece</th><th>Qty</th><th>Size (L × W)</th><th>Notes</th></tr></thead>
        <tbody id="osbRipBody"></tbody>
        <tfoot><tr class="totals-row"><td colspan="4" id="osbRipTotals"></td></tr></tfoot>
      </table>

      <p id="osbSummary" class="subtle"></p>
    </div>

    <div class="schedule-section">
      <h4>PIR Insulation — Rip Cuts Only</h4>
      <table id="pirRipTable">
        <thead><tr><th>Piece Ref</th><th>Qty</th><th>Cut Size (L x W)</th><th>Type</th></tr></thead>
        <tbody id="pirRipBody"></tbody>
      </table>
      <p id="pirSummary" class="subtle"></p>
    </div>

    <div class="schedule-section">
      <h4>3. Plastic Grid Tiles (Modules)</h4>
      <table id="gridTable">
        <thead><tr><th>Piece Ref</th><th>Qty</th><th>Cut Size (L x W)</th><th>Type</th></tr></thead>
        <tbody id="gridBody"></tbody>
      </table>
    </div>
  </div>

  <!-- View: Walls Cutting List -->
  <div id="wallsBomPage" class="page" aria-hidden="true">
    <h2 tabindex="-1">Walls Cutting List</h2>
    <div class="schedule-section">
      <h4>Walls — Items</h4>
      <table class="sticky-table">
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>L (mm)</th>
            <th>W (mm)</th>
            <th>D (mm)</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody id="bomTable"></tbody>
      </table>
    </div>
  </div>

  <div id="roofBomPage" class="page" aria-hidden="true">
    <h2 tabindex="-1">Roof Cutting List</h2>
    <div class="schedule-section">
      <h4>Roof — Items</h4>
      <table class="sticky-table">
        <thead>
          <tr>
            <th>Item</th><th>Qty</th><th>L (mm)</th><th>W (mm)</th><th>Notes</th>
          </tr>
        </thead>
        <tbody id="roofBomTable">
          <tr><td colspan="5">Roof cutting list not yet generated.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script type="module" src="./src/index.js"></script>
  <script type="module">
    import { initViews } from './src/views.js';
    initViews();
  </script>
</body>
</html>
